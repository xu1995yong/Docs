## Http与Https

### Http请求与响应

### HTTPS介绍
HTTPS是以安全为目标的HTTP通道，简单讲是HTTP的安全版，即



HTTPS协议的主要作用可以分为两种：一种是建立一个信息安全通道，来保证数据传输的安全；另一种就是确认网站的真实性。
HTTPS协议使用的是443端口。

### 二、HTTPS的工作原理

1、客户端发起HTTPS请求

这个没什么好说的，就是用户在浏览器里输入一个https网址，然后连接到server的443端口。

2、服务端的配置

采用HTTPS协议的服务器必须要有一套数字证书。这套证书其实就是一对公钥和私钥。

3、传送证书

这个证书其实就是公钥，只是包含了很多信息，如证书的颁发机构，过期时间等等。

4、客户端解析证书

这部分工作是有客户端的TLS来完成的，首先会验证公钥是否有效，比如颁发机构，过期时间等等，如果发现异常，则会弹出一个警告框，提示证书存在问题。

如果证书没有问题，那么就生成一个随机值，然后用证书对该随机值进行加密。

5、传送加密信息

传送用证书加密后的随机值，目的就是让服务端得到这个随机值，以后客户端和服务端的通信就可以通过这个随机值来进行加密解密了。

6、服务段解密信息

服务端用私钥解密后，得到了客户端传过来的随机值(私钥)，然后把内容通过该值进行对称加密。

7、传输加密后的信息

这部分信息是服务段用私钥加密后的信息，可以在客户端被还原。

8、客户端解密信息

客户端用之前生成的密钥解密服务段传过来的信息，于是获取了解密后的内容。

## Cookie

### Cookie的介绍

由于HTTP协议是无状态的，服务器端无法知道每次用户请求的区别。这时就需要使用Cookie技术保存用户的状态信息。

Cookie是一小段K-V键值对形式的字符串。当浏览器第一次访问Web服务器时，Web服务器会创建Cookie并返回给浏览器，之后浏览器将Cookie存储在用户本地。这样当浏览器再次向该Web服务器发送请求时就会附带这些Cookie，Web服务器就可以使用这些Cookie来识别不同的用户。

### Cookie常用属性

```
name ：一个唯一确定cookie的名称，不区分大小写，cookie的名字必须是经过URL编码的。
value：存储在cookie中的字符串值，必须经过被URL编码
domain：即cookie所属的域。Cookie是不可跨域名的，一个域名下的cookie不会被提交到其他域名。
expires：即cookie的有效期。
max-age：即cookie的最大生存时间，以秒为单位。
```

### Cookie的缺陷

1. 每个域的cookie总数是有限的，不同浏览器之间各有不同。
2. Cookie会被附加在每个HTTP请求中，所以无形中增加了流量。
3. 由于在HTTP请求中的Cookie是明文传递的，所以安全性成问题，除非用HTTPS。
4. Cookie的大小限制在4KB左右，对于复杂的存储需求来说是不够用的。

## Session

### Session的介绍

由于Cookie存在各种缺陷，服务器端采用Session技术来保存用户的状态信息，Session指的是服务器端为客户端所开辟的存储空间。

当浏览器第一次访问Web服务器时，Web服务器会在内部创建一个Session保存用户的状态信息，并将该Session的Id保存在Cookie中返回给浏览器。这样当浏览器再次向该Web服务器发送请求时就会附带保存了SessionId的cookie，Web服务器就可以根据SessionId获取保存在服务器内的浏览器对应的Session。

### 分布式集群中的Session共享

